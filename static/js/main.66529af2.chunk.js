(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(33),i=n.n(r),a=(n(111),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),r(e),i(e)}))}),s=n(157),l=n(93),u=n(164),j=n(174),b=n(20),d=n(7),O=n(1),g=Object(c.createContext)(),h=function(){var e,t;e="https://apis.google.com/js/api.js",t=window.onGoogleScriptLoad,function(){var n="google-js",c=document.getElementsByTagName("script")[0];if(!document.getElementById(n)){var o=document.createElement("script");o.id=n,o.src=e,o.onload=t,c.parentNode.insertBefore(o,c)}}()},f=["https://sheets.googleapis.com/$discovery/rest?version=v4"];function m(e){var t=Object(c.useState)(null),n=Object(d.a)(t,2),o=n[0],r=n[1],i=Object(c.useState)(!0),a=Object(d.a)(i,2),s=a[0],l=a[1],u=function(){window.gapi.client.init({apiKey:"AIzaSyAkzOZf_4FlNTobVNvboqg7lEhXkRBuiKs",clientId:"204563014780-78k7jldehlpht8unvftib66p6dkht79q.apps.googleusercontent.com",discoveryDocs:f,scope:"https://www.googleapis.com/auth/drive"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(j),j(window.gapi.auth2.getAuthInstance().isSignedIn.get()),l(!1)}))};function j(e){if(console.log(e),e){var t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();r(t)}else r(null)}Object(c.useEffect)((function(){window.gapi?window.gapi.load("client:auth2",u):(window.onGoogleScriptLoad=function(){window.gapi.load("client:auth2",u)},h())}),[]);return s?Object(O.jsx)("p",{children:"Loading"}):o?Object(O.jsx)(g.Provider,Object(b.a)({value:{user:o,logout:function(){return window.gapi.auth2.getAuthInstance().signOut()}}},e)):Object(O.jsx)("button",{onClick:function(e){window.gapi.auth2.getAuthInstance().signIn()},children:"Sign In"})}var p=function(){return Object(c.useContext)(g)},x=n(69);function v(e){return e?x.DateTime.fromFormat(e,"M/d/yyyy hh:mm:ss"):null}var w="1H84QXobhrkLsmVGoB-7mpF_1yZ3diiNM0oRaL4EwSFY",I=Object(c.createContext)({current:null,setCurrent:function(){},itemsInQueue:[],setQueue:function(){},itemsInProgress:[],setInProgress:function(){},reload:function(){}});function C(e){var t=Object(c.useState)(!0),n=Object(d.a)(t,2),o=(n[0],n[1]),r=Object(c.useState)(null),i=Object(d.a)(r,2),a=i[0],s=i[1],l=Object(c.useState)([]),u=Object(d.a)(l,2),j=u[0],g=u[1],h=Object(c.useState)([]),f=Object(d.a)(h,2),m=f[0],C=f[1],k=Object(c.useState)(2),S=Object(d.a)(k,2),y=S[0],T=S[1],E=Object(c.useState)(null),F=Object(d.a)(E,2),N=F[0],P=F[1],A=p().user,M=function(){o(!0),window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:w,range:"Form Responses 1!A".concat(y,":K")}).then((function(e){o(!1),console.log(new Date,e);var t=e.result;if(t.values.length>0){t=function(e){return e.map((function(e,t){return{row:t,date:v(e[0]),fullName:e[1],email:e[2],className:e[4],topic:e[5],tutor:e[8],isComplete:"TRUE"===e[10],e:e}}))}(t.values);var n=t.filter((function(e){return e.date&&(t=e.date,n=36,t>x.DateTime.now().minus({hours:n}));var t,n}));T(n.length?n[0].row+2:t.values.length+2),console.log(new Date,n),g(n.filter((function(e){return!e.tutor&&!e.isComplete}))),C(n.filter((function(e){return e.tutor&&!e.isComplete}))),P(n.find((function(e){return e.tutor===A.getEmail()&&!e.isComplete})))}}))},B=function(){if(a)try{clearInterval(a)}catch(e){}},L=function(){B(),console.log(a),M(),s(setInterval((function(){M()}),6e4))};return Object(c.useEffect)((function(){return A&&L(),function(){B()}}),[A]),Object(O.jsx)(I.Provider,Object(b.a)({value:{itemsInQueue:j,setQueue:g,itemsInProgress:m,setInProgress:C,current:N,setCurrent:P,reload:function(){return L()}}},e))}var k=function(){return Object(c.useContext)(I)},S=n(58),y=n(13),T=n(165),E=n(167),F=n(169),N=n(168),P=n(170),A=n(171),M=n(85),B=n.n(M),L=n(67),z=n.n(L),R=n(84),D=n.n(R),Q=Object(c.createContext)();function U(e){return Object(O.jsx)(Q.Provider,Object(b.a)({value:p().user},e))}var K=function(){return Object(c.useContext)(Q)};function G(e){var t=e.title,n=e.subtitle,o=e.contentTitle,r=e.contentText,i=e.options,a=e.row,s=K(),l=k().reload,u=Object(c.useState)(a+2),j=Object(d.a)(u,1)[0],b=function(e,t){!function(e,t){var n={spreadsheetId:w,range:e,valueInputOption:"USER_ENTERED"},c={range:e,values:[t]};window.gapi.client.sheets.spreadsheets.values.update(n,c).then((function(e){l()}),(function(e){console.error("error: "+e.result.error.message)}))}("".concat(e).concat(j,":").concat(e).concat(j),[t])};return Object(O.jsxs)(T.a,{sx:{width:"45%",margin:1,minWidth:300},children:[Object(O.jsx)(E.a,{title:t,subheader:n}),Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{variant:"subtitle1",color:"text.primary",children:o}),Object(O.jsx)(N.a,{variant:"subtitle2",color:"text.secondary",children:r})]}),Object(O.jsxs)(P.a,{disableSpacing:!0,children:[i.assignToMe?Object(O.jsx)(A.a,{"aria-label":"Assign to Me",onClick:function(){b("I",s.getEmail())},children:Object(O.jsx)(z.a,{})}):Object(O.jsx)(O.Fragment,{}),i.unassign?Object(O.jsx)(A.a,{"aria-label":"Unassign myself",onClick:function(){b("I","")},children:Object(O.jsx)(D.a,{})}):Object(O.jsx)(O.Fragment,{}),i.markComplete?Object(O.jsx)(A.a,{"aria-label":"Mark complete",onClick:function(){b("K","TRUE")},children:Object(O.jsx)(B.a,{})}):Object(O.jsx)(O.Fragment,{})]})]})}function _(e){var t=e.item;return t?Object(O.jsx)(G,{name:t.name,date:t.date,row:t.row,className:t.class,topic:t.topic,options:{markComplete:!0,unassign:!0}}):Object(O.jsx)(O.Fragment,{})}n(117);function q(e){var t=e.items,n=e.options;return Object(O.jsx)("div",{className:"deck",children:t.map((function(e){return Object(O.jsx)(G,Object(b.a)(Object(b.a)({},e),{},{options:n}))}))})}function J(){var e=k().itemsInProgress;return Object(O.jsx)(q,{items:e.map((function(e){return{title:e.tutor,subtitle:e.fullName,contentTitle:e.className,contentText:e.topic,row:e.row}})),options:{unassign:!0,assignToMe:!0,markComplete:!0}})}function V(){var e=k().itemsInQueue;return Object(O.jsx)(q,{items:e.map((function(e){return{title:e.fullName,subtitle:e.date.toFormat("h:mm a"),contentTitle:e.className,contentText:e.topic,row:e.row}})),options:{assignToMe:!0}})}var W=n(88),X=n.n(W),Y=n(89),Z=n.n(Y),H=n(159),$=n(162),ee=n(160),te=n(163),ne=n(155),ce=n(156),oe=n(175);function re(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var c="#";for(t=0;t<3;t+=1){c+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return c}function ie(e){if(e.split(" ").length>2){var t=e.split(" ");t.splice(1,1),e=t.join(" ")}return{sx:{bgcolor:re(e)},children:"".concat(e.split(" ")[0][0]).concat(e.split(" ")[1][0])}}function ae(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],o=t[1],r=p().logout,i=K(),a=Boolean(n),s=function(){o(null)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(oe.a,{sx:{display:"flex",alignItems:"center",textAlign:"center",justifyContent:"end",padding:2},children:Object(O.jsx)(H.a,{title:"Account settings",children:Object(O.jsx)(A.a,{onClick:function(e){o(e.currentTarget)},size:"small",sx:{ml:2},children:Object(O.jsx)($.a,Object(b.a)({sx:{width:32,height:32}},ie(i.getName())))})})}),Object(O.jsxs)(ee.a,{anchorEl:n,open:a,onClose:s,onClick:s,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(O.jsxs)(te.a,{children:[Object(O.jsx)($.a,{})," Profile"]}),Object(O.jsxs)(te.a,{children:[Object(O.jsx)($.a,{})," My account"]}),Object(O.jsx)(ne.a,{}),Object(O.jsxs)(te.a,{children:[Object(O.jsx)(ce.a,{children:Object(O.jsx)(X.a,{fontSize:"small"})}),"Settings"]}),Object(O.jsxs)(te.a,{onClick:r,children:[Object(O.jsx)(ce.a,{children:Object(O.jsx)(Z.a,{fontSize:"small"})}),"Logout"]})]})]})}var se=n(172),le=n(166),ue=n(173),je=n(91),be=n.n(je),de=n(90),Oe=n.n(de),ge=n(92),he=n.n(ge);function fe(e){var t=e.icon,n=e.to,o=e.label,r=Object(c.useMemo)((function(){return Object(c.forwardRef)((function(e,t){return Object(O.jsx)(S.b,Object(b.a)(Object(b.a)({to:n,ref:t},e),{},{role:void 0}))}))}),[n]);return Object(O.jsx)(se.a,{label:o,icon:t,component:r})}var me=["/my-work","/","/in-progress"];function pe(){var e=Object(y.e)().pathname;return Object(O.jsx)(le.a,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:Object(O.jsxs)(ue.a,{showLabels:!0,value:me.indexOf(e),children:[Object(O.jsx)(fe,{label:"My Work",icon:Object(O.jsx)(Oe.a,{}),to:"my-work"}),Object(O.jsx)(fe,{label:"Queue",icon:Object(O.jsx)(be.a,{}),to:"./"}),Object(O.jsx)(fe,{label:"In Progress",icon:Object(O.jsx)(he.a,{}),to:"in-progress"})]})})}function xe(){return Object(O.jsxs)(S.a,{children:[Object(O.jsx)(ae,{}),Object(O.jsxs)(y.c,{children:[Object(O.jsx)(y.a,{exact:!0,path:"/",element:Object(O.jsx)(V,{})}),Object(O.jsx)(y.a,{exact:!0,path:"in-progress",element:Object(O.jsx)(J,{})}),Object(O.jsx)(y.a,{exact:!0,path:"my-work",element:Object(O.jsx)(_,{})})]}),Object(O.jsx)(pe,{})]})}function ve(e){var t=e.children,n=Object(s.a)("(prefers-color-scheme: dark)"),o=Object(c.useMemo)((function(){return Object(l.a)({palette:{mode:n?"dark":"light"}})}),[n]);return Object(O.jsxs)(u.a,{theme:o,children:[Object(O.jsx)(j.a,{}),Object(O.jsx)(m,{children:Object(O.jsx)(C,{children:Object(O.jsx)(U,{children:Object(O.jsx)(xe,{children:t})})})})]})}i.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(ve,{})}),document.getElementById("root")),a()}},[[119,1,2]]]);
//# sourceMappingURL=main.66529af2.chunk.js.map